# CourseProject

Please fork this repository and paste the github link of your fork on Microsoft CMT. Detailed instructions are on Coursera under Week 1: Course Project Overview/Week 9 Activities.

# Requirements
Project built using Python 3.9.2
Django 3.2.9

# Project Set Up 
Clone this repo to where you will work on it:
```sh
git clone https://github.com/styloooo/CourseProject.git
```

All of these commands are issued from the project's top directory that has `manage.py` in it.

Create a virtual environment for the project (I highly recommend [virtualenvwrapper](https://virtualenvwrapper.readthedocs.io/en/latest/)).

Generate a Django secret key:
```sh
>python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
```
With your newly created virtual environment activated, open this text file: `$VIRTUAL_ENV/bin/postactivate` and add the value generated by the previous command to the environmental variable `DJANGO_SECRET_KEY`:

```sh
export DJANGO_SECRET_KEY='secret-key-that-you-just-generated'
```

Save the file and check that the environmental variable has been exported - if not, reopen your virtual environment and check again. 

Install the project dependencies and remember to do so every time you pull the repo. From the top project directory:
```sh
pip install -r requirements.txt
```

If you run into permissions issues with any of the following commands, you need to change the permissions on each of these shell files to make them executable as such:

```sh
chmod +x shell_file_name.sh
```

Finally, push the database migrations:
```sh
./bin/makemigrations.sh
./bin/migrate.sh
```

Download the required NLTK corpora (you only need to do this once per configuration):
```sh
./bin/setup_nltk.sh
```

Run the app to see if it launches without error:
```sh
> ./bin/runserver.sh
```

# Testing
To run tests from the command line (with default verbosity & all tests):

```sh
python manage.py test
```

This repo includes coverage testing dependencies for determining what lines in a module have been executed by tests. When executed from the project root, this command runs all project tests, generates a coverage report, and opens that report in a browser:

```sh
coverage run manage.py test indexer -v 2 && coverage html && open htmlcov/index.html
```

For more information on configuring Coverage.py, check the docs [here](https://coverage.readthedocs.io/en/6.1.2/).
